(info: DA RIVEDERE scritta su mint, al buio)

o<rastrema> sub
#<diam_fresa>    = #1 (= 1 diam. fresa)
#<x_alta>        = #2 (= 10.00 X punto alto)
#<x_bassa>       = #3 (= 12.00 X punto basso)
#<diam_max1>     = #4 (= 3.00 max diam)
#<diam_min2>     = #5 (= 1.00 min diam)
#<avanz_x>       = #6 (= 0.20 avanz. X per giro)
#<vel_F>         = #7 (= 1000 vel mandrino)


#<z_max>         = [0.5 * #4] 
#<z_min>         = [0.5 * #5] 
#<z_sicura>      = [1.25 * #<z_max>]
#<giri_da_fare>  = [ABS[#<z_max> - #<z_min>] / #<avanz_x>]
#<gradi_finali>  = [#<giri_da_fare> * 360]

; TODO subroutines di controllo inserimento dati opportuni 

o100 if [#2 LT #3] ; inverte in modo che la fresa lavori di lato
   #2 = #3
   #3 = #2
o100 endif

G0 Z#<z_sicura> 
G1 X#<x_alta> Z#<z_max> F[0.25 * #7]; si sposta al punto x1 di
G1 Z#<z_min> X#<x_bassa> A#<gradi_finali> F#7
G1 A[#<gradi_finali> + 360]      F#7

o<rastrema> endsub
M2

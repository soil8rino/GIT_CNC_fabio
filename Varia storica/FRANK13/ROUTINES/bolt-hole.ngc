(======================| Automatic Bolt Hole Using G83 Peck Drilling Routine |==========================)
(=== 		Copyright 2015 ~ Jerry Rutherford ~ Email: jerryarutherford@gmail.com        	     ===)
(=======================================================================================================)
O <bolt-hole> SUB
(=======================================================================================================)
(=======================================|       VARIABLES  	|=======================================)
(=======================================================================================================)
( #01 to #30				- Subroutine Variables						)
( #1000					- Degrees per step: Divide 360 by number of holes		)
( #1001					- Clearance Distance						)
( #1002					- Z-Depth adjusted for clearance				)
( #<_hal[pyvcp.bolt-l]>			- Number of holes to create					)
( #<_hal[pyvcp.bolt-i]>			- Radius of bolt hole circle.					)
( #<_hal[pyvcp.bolt-z]>			- Desired Final Depth						)
( #<_hal[pyvcp.bolt-q]>			- Peck Repetition Distance					)
( #<_hal[pyvcp.bolt-f]>			- Feed Rate							)
( #<_hal[pyvcp.bolt-s]>			- Spindle Speed in RPM						)
(=======================================================================================================)
( METRIC ABSOULUTE MODE											)
( And adjust the pyVCP panel accordingly or you may get surprised. Surprises are not fun!!!		)
	G21    				(Metric MODE SELECTED 						)
	G90				(Absolute Mode Needed Here.					)
(-------------------------------------------------------------------------------------------------------)
	G0 Z10				(Up 10mm for safety.						)
	M3 S #<_hal[pyvcp.bolt-s]>	(Start the spindle at speed.					)
	G04 P2 				(Spin up delay 2 seconds					)
	M7				(Mist Coolant ON						)
(-------------------------------------------------------------------------------------------------------)
	G0 X #<_hal[pyvcp.bolt-i]> 	(Move to RADIUS							)
	G0 Z 0				(Back to starting Z position					)
(-------------------------------------------------------------------------------------------------------)
	#1000 = [360 / #<_hal[pyvcp.bolt-l]> ]			(Calculate Angular Offset per hole.	)
	#1001 = 5.0						(5mm Clearance				)
	#1002 = [[ #<_hal[pyvcp.bolt-z]> + #1001 ]* [-1]] 	(Z-Depth plus clearance offset inverted	)
	G91							(Switch to Relative Mode		)
(-------------------------------------------------------------------------------------------------------)

	o100 while [#1 LT [#<_hal[pyvcp.bolt-l]> -1] ]
	  	#1 = [#1 + 1] 		(increment the test counter..					)
		G83 Z #1002 R #1001 Q #<_hal[pyvcp.bolt-q]> F #<_hal[pyvcp.bolt-f]>
		^#1000			(Rotate appropriate angle					)
	o100 endwhile

(-------------------------------------------------------------------------------------------------------)
	G21    				(Metric MODE SELECTED 						)
	G90				(Back to Absolute Mode						)
	M5				(Spindle OFF							)
	M9				(Coolant OFF							)
	G0 Z 10				(Up 10mm for safety						)
	G0 X 0.0 Y 0.0			(Back to original X/Y position					)
	G0 Z 0				(Z back down to starting height.				)
(=======================================================================================================)
O <bolt-hole> ENDSUB
(=======================================================================================================)
